function hideShowElement(e){var t=document.getElementById(e);t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none")}function filtroRegistro(){var e,t;e=inputFiltro.value.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),t=document.getElementById("form_select--filtro");for(var o=0;o<tr.length;o++){tr[o].getElementsByTagName("td")[t.value].textContent.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").indexOf(e)>-1?tr[o].style.display="":tr[o].style.display="none"}}function selectAll(){var e;if(checkboxMaster.checked)for(e=0;e<tr.length;e++)""==tr[e].style.display&&(tr[e].querySelector("input[type=checkbox]").checked=!0);else for(e=0;e<tr.length;e++)tr[e].querySelector("input[type=checkbox]").checked=!1}function classifyAll(){var e,t;if(e=document.getElementById("form_modal--input-operacao").value,""==validaOperacoes(e)&&""!=e)alert("Operação inválida");else{for(t=0;t<tr.length;t++)1==tr[t].querySelector("input[type=checkbox]").checked&&(tr[t].querySelector("input[type=text]").value=e);$("#modalCl").modal("hide")}}function salvarRegistros(){for(var e,t,o=[],n=0,r=!1,l=[],i=0;i<tr.length;i++)t=tr[i].getElementsByTagName("td"),""!=(n=validaOperacoes(tr[i].querySelector("input[type=text]").value))?(e={cliente:{nome:t[2].innerText,codigo:t[7].innerText},operacao:{id:n},ativo:t[3].innerText,tipo:t[4].innerText,quantidade:t[5].innerText,preco:t[6].innerText,data:t[8].innerText},o.push(e),l.push(i)):r=!0;if(l.length>0)for(i=0;i<l.length;i++)tr[l[i]].remove();if(r){var a=tr.length-l;alert(l.length+" registros salvos.\n"+a+" registros com operação em branco ou inválida!")}else alert(l+" registros salvos.");console.log(o)}function validaOperacoes(e){var t=0;for(i=0;i<options.length;i++)options[i].value.indexOf(e)>-1&&""!=e&&(t=options[i].getAttribute("data-op"));return t}var tbody,tr,inputFiltro,checkboxMaster,list,options;window.onload=function(){(inputFiltro=document.getElementById("input_filtra-registro")).addEventListener("keyup",filtroRegistro),(checkboxMaster=document.querySelector("input[name=checkbox-master]")).addEventListener("change",selectAll),document.getElementById("form_modal--classify-button").addEventListener("click",classifyAll),document.getElementById("btn-filtro").addEventListener("click",function(){hideShowElement("form_filtro-registros")}),tbody=document.getElementById("table_tbody--registros"),tr=tbody.getElementsByTagName("tr"),list=document.getElementById("table_input--list-operacoes"),options=list.getElementsByTagName("option"),document.getElementById("btn-salvar").addEventListener("click",salvarRegistros)},$("#modalCl").on("show.bs.modal",function(e){document.getElementById("form_modal--input-operacao").value=""});